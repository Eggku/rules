name: 自动转换规则集
on:
  schedule:
    - cron: "0 */12 * * *"  # 每 12 小时运行一次
  push:
    branches:
      - main  # 监听 `main` 分支的代码变更
  workflow_dispatch:  # 允许手动运行

jobs:
  convert-rules:
    runs-on: windows-latest
    steps:
      - name: 🛠️ 检出仓库代码
        uses: actions/checkout@v3

      - name: 🔄 下载 `mihomo.exe`
        run: |
          curl -L -o config/mihomo.exe "https://your-download-link.com/mihomo.exe"
        shell: bash  # 使用 Bash 运行 curl

      - name: 🛠️ 运行 `.bat` 转换脚本
        run: cmd /c "%GITHUB_WORKSPACE%\config\auto-convert.bat"   # ✅ 用 CMD 执行 .bat 文件
        shell: cmd  # 强制 CMD 运行
