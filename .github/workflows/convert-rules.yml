name: è‡ªåŠ¨è½¬æ¢è§„åˆ™
on:
  schedule:
    - cron: "0 */12 * * *"  # æ¯ 12 å°æ—¶æ‰§è¡Œä¸€æ¬¡
  push:
    branches:
      - main  # ç›‘å¬ main åˆ†æ”¯çš„æ¨é€äº‹ä»¶
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  convert-rules:
    runs-on: windows-latest
    steps:
      - name: ğŸ› ï¸ æ£€å‡ºä»“åº“ä»£ç 
        uses: actions/checkout@v3

      - name: ğŸ”§ è®¾ç½®è¿è¡Œç¯å¢ƒ
        run: |
          echo "æ­£åœ¨è®¾ç½®ç¯å¢ƒ..."
          mkdir rules/mrs || echo "ç›®å½•å·²å­˜åœ¨"

      - name: ğŸ”„ æ‰§è¡Œè½¬æ¢è„šæœ¬
        run: |
          call auto-convert.bat

      - name: ğŸ“‚ ç”Ÿæˆè½¬æ¢åæ–‡ä»¶åˆ—è¡¨
        run: dir /b rules/mrs

      - name: ğŸš€ æäº¤å¹¶æ¨é€æ›´æ–°
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "github-actions@example.com"
          git add .
          git commit -m "ğŸ”„ è‡ªåŠ¨è½¬æ¢æ›´æ–° | $(date +'%Y-%m-%d %H:%M:%S')"
          git push
